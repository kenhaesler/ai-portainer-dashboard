@import "tailwindcss";

@custom-variant dark (&:is(.dark *));

@theme {
  --color-background: hsl(0 0% 100%);
  --color-foreground: hsl(240 10% 3.9%);
  --color-card: hsl(0 0% 100%);
  --color-card-foreground: hsl(240 10% 3.9%);
  --color-popover: hsl(0 0% 100%);
  --color-popover-foreground: hsl(240 10% 3.9%);
  --color-primary: hsl(240 5.9% 10%);
  --color-primary-foreground: hsl(0 0% 98%);
  --color-secondary: hsl(240 4.8% 95.9%);
  --color-secondary-foreground: hsl(240 5.9% 10%);
  --color-muted: hsl(240 4.8% 95.9%);
  --color-muted-foreground: hsl(240 3.8% 46.1%);
  --color-accent: hsl(240 4.8% 95.9%);
  --color-accent-foreground: hsl(240 5.9% 10%);
  --color-destructive: hsl(0 84.2% 60.2%);
  --color-destructive-foreground: hsl(0 0% 98%);
  --color-border: hsl(240 5.9% 90%);
  --color-input: hsl(240 5.9% 90%);
  --color-ring: hsl(240 5.9% 10%);
  --color-sidebar-background: hsl(0 0% 98%);
  --color-sidebar-foreground: hsl(240 5.3% 26.1%);
  --color-sidebar-primary: hsl(240 5.9% 10%);
  --color-sidebar-primary-foreground: hsl(0 0% 98%);
  --color-sidebar-accent: hsl(240 4.8% 95.9%);
  --color-sidebar-accent-foreground: hsl(240 5.9% 10%);
  --color-sidebar-border: hsl(220 13% 91%);
  --color-sidebar-ring: hsl(217.2 91.2% 59.8%);
  --color-chart-1: hsl(12 76% 61%);
  --color-chart-2: hsl(173 58% 39%);
  --color-chart-3: hsl(197 37% 24%);
  --color-chart-4: hsl(43 74% 66%);
  --color-chart-5: hsl(27 87% 67%);
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
}

@layer base {
  /* Default Dark Theme */
  .dark {
    --color-background: hsl(240 10% 3.9%);
    --color-foreground: hsl(0 0% 98%);
    --color-card: hsl(240 10% 3.9%);
    --color-card-foreground: hsl(0 0% 98%);
    --color-popover: hsl(240 10% 3.9%);
    --color-popover-foreground: hsl(0 0% 98%);
    --color-primary: hsl(0 0% 98%);
    --color-primary-foreground: hsl(240 5.9% 10%);
    --color-secondary: hsl(240 3.7% 15.9%);
    --color-secondary-foreground: hsl(0 0% 98%);
    --color-muted: hsl(240 3.7% 15.9%);
    --color-muted-foreground: hsl(240 5% 64.9%);
    --color-accent: hsl(240 3.7% 15.9%);
    --color-accent-foreground: hsl(0 0% 98%);
    --color-destructive: hsl(0 62.8% 30.6%);
    --color-destructive-foreground: hsl(0 0% 98%);
    --color-border: hsl(240 3.7% 15.9%);
    --color-input: hsl(240 3.7% 15.9%);
    --color-ring: hsl(240 4.9% 83.9%);
    --color-sidebar-background: hsl(240 5.9% 10%);
    --color-sidebar-foreground: hsl(240 4.8% 95.9%);
    --color-sidebar-primary: hsl(224.3 76.3% 48%);
    --color-sidebar-primary-foreground: hsl(0 0% 100%);
    --color-sidebar-accent: hsl(240 3.7% 15.9%);
    --color-sidebar-accent-foreground: hsl(240 4.8% 95.9%);
    --color-sidebar-border: hsl(240 3.7% 15.9%);
    --color-sidebar-ring: hsl(217.2 91.2% 59.8%);
    --color-chart-1: hsl(220 70% 50%);
    --color-chart-2: hsl(160 60% 45%);
    --color-chart-3: hsl(30 80% 55%);
    --color-chart-4: hsl(280 65% 60%);
    --color-chart-5: hsl(340 75% 55%);
  }

  /* Catppuccin Latte (Light) */
  .catppuccin-latte {
    --color-background: #eff1f5; /* Base */
    --color-foreground: #4c4f69; /* Text */
    --color-card: #e6e9ef; /* Surface0 */
    --color-card-foreground: #4c4f69; /* Text */
    --color-popover: #e6e9ef; /* Surface0 */
    --color-popover-foreground: #4c4f69; /* Text */
    --color-primary: #8839ef; /* Mauve */
    --color-primary-foreground: #eff1f5; /* Base */
    --color-secondary: #ccd0da; /* Surface1 */
    --color-secondary-foreground: #4c4f69; /* Text */
    --color-muted: #bcc0cc; /* Surface2 */
    --color-muted-foreground: #6c6f85; /* Subtext0 */
    --color-accent: #1e66f5; /* Blue */
    --color-accent-foreground: #eff1f5; /* Base */
    --color-destructive: #d20f39; /* Red */
    --color-destructive-foreground: #eff1f5; /* Base */
    --color-border: #ccd0da; /* Surface1 */
    --color-input: #ccd0da; /* Surface1 */
    --color-ring: #8839ef; /* Mauve */
    --color-sidebar-background: #e6e9ef; /* Surface0 */
    --color-sidebar-foreground: #4c4f69; /* Text */
    --color-sidebar-primary: #8839ef; /* Mauve */
    --color-sidebar-primary-foreground: #eff1f5; /* Base */
    --color-sidebar-accent: #ccd0da; /* Surface1 */
    --color-sidebar-accent-foreground: #4c4f69; /* Text */
    --color-sidebar-border: #ccd0da; /* Surface1 */
    --color-sidebar-ring: #1e66f5; /* Blue */
    --color-chart-1: #8839ef; /* Mauve */
    --color-chart-2: #209fb5; /* Sapphire */
    --color-chart-3: #40a02b; /* Green */
    --color-chart-4: #fe640b; /* Peach */
    --color-chart-5: #df8e1d; /* Yellow */
  }

  /* Catppuccin Frappé (Dark) */
  .catppuccin-frappe {
    --color-background: #303446; /* Base */
    --color-foreground: #c6d0f5; /* Text */
    --color-card: #414559; /* Surface0 */
    --color-card-foreground: #c6d0f5; /* Text */
    --color-popover: #414559; /* Surface0 */
    --color-popover-foreground: #c6d0f5; /* Text */
    --color-primary: #ca9ee6; /* Mauve */
    --color-primary-foreground: #303446; /* Base */
    --color-secondary: #51576d; /* Surface1 */
    --color-secondary-foreground: #c6d0f5; /* Text */
    --color-muted: #626880; /* Surface2 */
    --color-muted-foreground: #a5adce; /* Subtext0 */
    --color-accent: #85c1dc; /* Sapphire */
    --color-accent-foreground: #303446; /* Base */
    --color-destructive: #e78284; /* Red */
    --color-destructive-foreground: #303446; /* Base */
    --color-border: #51576d; /* Surface1 */
    --color-input: #51576d; /* Surface1 */
    --color-ring: #ca9ee6; /* Mauve */
    --color-sidebar-background: #292c3c; /* Mantle */
    --color-sidebar-foreground: #c6d0f5; /* Text */
    --color-sidebar-primary: #ca9ee6; /* Mauve */
    --color-sidebar-primary-foreground: #303446; /* Base */
    --color-sidebar-accent: #414559; /* Surface0 */
    --color-sidebar-accent-foreground: #c6d0f5; /* Text */
    --color-sidebar-border: #414559; /* Surface0 */
    --color-sidebar-ring: #85c1dc; /* Sapphire */
    --color-chart-1: #ca9ee6; /* Mauve */
    --color-chart-2: #85c1dc; /* Sapphire */
    --color-chart-3: #a6d189; /* Green */
    --color-chart-4: #ef9f76; /* Peach */
    --color-chart-5: #e5c890; /* Yellow */
  }

  /* Catppuccin Macchiato (Dark) */
  .catppuccin-macchiato {
    --color-background: #24273a; /* Base */
    --color-foreground: #cad3f5; /* Text */
    --color-card: #363a4f; /* Surface0 */
    --color-card-foreground: #cad3f5; /* Text */
    --color-popover: #363a4f; /* Surface0 */
    --color-popover-foreground: #cad3f5; /* Text */
    --color-primary: #c6a0f6; /* Mauve */
    --color-primary-foreground: #24273a; /* Base */
    --color-secondary: #494d64; /* Surface1 */
    --color-secondary-foreground: #cad3f5; /* Text */
    --color-muted: #5b6078; /* Surface2 */
    --color-muted-foreground: #a5adcb; /* Subtext0 */
    --color-accent: #7dc4e4; /* Sapphire */
    --color-accent-foreground: #24273a; /* Base */
    --color-destructive: #ed8796; /* Red */
    --color-destructive-foreground: #24273a; /* Base */
    --color-border: #494d64; /* Surface1 */
    --color-input: #494d64; /* Surface1 */
    --color-ring: #c6a0f6; /* Mauve */
    --color-sidebar-background: #1e2030; /* Mantle */
    --color-sidebar-foreground: #cad3f5; /* Text */
    --color-sidebar-primary: #c6a0f6; /* Mauve */
    --color-sidebar-primary-foreground: #24273a; /* Base */
    --color-sidebar-accent: #363a4f; /* Surface0 */
    --color-sidebar-accent-foreground: #cad3f5; /* Text */
    --color-sidebar-border: #363a4f; /* Surface0 */
    --color-sidebar-ring: #7dc4e4; /* Sapphire */
    --color-chart-1: #c6a0f6; /* Mauve */
    --color-chart-2: #7dc4e4; /* Sapphire */
    --color-chart-3: #a6da95; /* Green */
    --color-chart-4: #f5a97f; /* Peach */
    --color-chart-5: #eed49f; /* Yellow */
  }

  /* Catppuccin Mocha (Darkest) */
  .catppuccin-mocha {
    --color-background: #1e1e2e; /* Base */
    --color-foreground: #cdd6f4; /* Text */
    --color-card: #313244; /* Surface0 */
    --color-card-foreground: #cdd6f4; /* Text */
    --color-popover: #313244; /* Surface0 */
    --color-popover-foreground: #cdd6f4; /* Text */
    --color-primary: #cba6f7; /* Mauve */
    --color-primary-foreground: #1e1e2e; /* Base */
    --color-secondary: #45475a; /* Surface1 */
    --color-secondary-foreground: #cdd6f4; /* Text */
    --color-muted: #585b70; /* Surface2 */
    --color-muted-foreground: #a6adc8; /* Subtext0 */
    --color-accent: #74c7ec; /* Sapphire */
    --color-accent-foreground: #1e1e2e; /* Base */
    --color-destructive: #f38ba8; /* Red */
    --color-destructive-foreground: #1e1e2e; /* Base */
    --color-border: #45475a; /* Surface1 */
    --color-input: #45475a; /* Surface1 */
    --color-ring: #cba6f7; /* Mauve */
    --color-sidebar-background: #181825; /* Mantle */
    --color-sidebar-foreground: #cdd6f4; /* Text */
    --color-sidebar-primary: #cba6f7; /* Mauve */
    --color-sidebar-primary-foreground: #1e1e2e; /* Base */
    --color-sidebar-accent: #313244; /* Surface0 */
    --color-sidebar-accent-foreground: #cdd6f4; /* Text */
    --color-sidebar-border: #313244; /* Surface0 */
    --color-sidebar-ring: #74c7ec; /* Sapphire */
    --color-chart-1: #cba6f7; /* Mauve */
    --color-chart-2: #74c7ec; /* Sapphire */
    --color-chart-3: #a6e3a1; /* Green */
    --color-chart-4: #fab387; /* Peach */
    --color-chart-5: #f9e2af; /* Yellow */
  }

  /* ================================================
     APPLE GLASSMORPHISM LIGHT THEME
     Modern frosted glass UI with gradient backgrounds
     ================================================ */
  .apple-light {
    /* Glass card backgrounds - semi-transparent */
    --color-background: #f0f4f8; /* Will be overridden by gradient */
    --color-foreground: #1a1a2e; /* Deep blue-black text */
    --color-card: rgba(255, 255, 255, 0.7); /* Frosted glass */
    --color-card-foreground: #1a1a2e;
    --color-popover: rgba(255, 255, 255, 0.85);
    --color-popover-foreground: #1a1a2e;
    --color-primary: #6366f1; /* Vibrant indigo */
    --color-primary-foreground: #ffffff;
    --color-secondary: rgba(255, 255, 255, 0.5);
    --color-secondary-foreground: #1a1a2e;
    --color-muted: rgba(148, 163, 184, 0.3);
    --color-muted-foreground: #64748b;
    --color-accent: #8b5cf6; /* Purple accent */
    --color-accent-foreground: #ffffff;
    --color-destructive: #ef4444;
    --color-destructive-foreground: #ffffff;
    --color-border: rgba(255, 255, 255, 0.4); /* Glass edge highlight */
    --color-input: rgba(255, 255, 255, 0.6);
    --color-ring: #6366f1;
    --color-sidebar-background: rgba(255, 255, 255, 0.6);
    --color-sidebar-foreground: #1a1a2e;
    --color-sidebar-primary: #6366f1;
    --color-sidebar-primary-foreground: #ffffff;
    --color-sidebar-accent: rgba(99, 102, 241, 0.1);
    --color-sidebar-accent-foreground: #1a1a2e;
    --color-sidebar-border: rgba(255, 255, 255, 0.3);
    --color-sidebar-ring: #6366f1;
    --color-chart-1: #6366f1; /* Indigo */
    --color-chart-2: #06b6d4; /* Cyan */
    --color-chart-3: #10b981; /* Emerald */
    --color-chart-4: #f59e0b; /* Amber */
    --color-chart-5: #ec4899; /* Pink */
    --radius-sm: 0.75rem;
    --radius-md: 1rem;
    --radius-lg: 1.25rem;
    --radius-xl: 1.5rem;
  }

  /* ================================================
     APPLE GLASSMORPHISM DARK THEME
     Deep space aesthetic with glowing glass elements
     ================================================ */
  .apple-dark {
    /* Glass card backgrounds - dark translucent */
    --color-background: #0a0a0f; /* Will be overridden by gradient */
    --color-foreground: #f1f5f9; /* Bright text */
    --color-card: rgba(30, 32, 48, 0.6); /* Dark frosted glass */
    --color-card-foreground: #f1f5f9;
    --color-popover: rgba(30, 32, 48, 0.85);
    --color-popover-foreground: #f1f5f9;
    --color-primary: #818cf8; /* Soft indigo */
    --color-primary-foreground: #0a0a0f;
    --color-secondary: rgba(51, 65, 85, 0.5);
    --color-secondary-foreground: #f1f5f9;
    --color-muted: rgba(71, 85, 105, 0.4);
    --color-muted-foreground: #94a3b8;
    --color-accent: #a78bfa; /* Violet accent */
    --color-accent-foreground: #0a0a0f;
    --color-destructive: #f87171;
    --color-destructive-foreground: #0a0a0f;
    --color-border: rgba(148, 163, 184, 0.15); /* Subtle glass edge */
    --color-input: rgba(51, 65, 85, 0.5);
    --color-ring: #818cf8;
    --color-sidebar-background: rgba(15, 15, 25, 0.8);
    --color-sidebar-foreground: #f1f5f9;
    --color-sidebar-primary: #818cf8;
    --color-sidebar-primary-foreground: #0a0a0f;
    --color-sidebar-accent: rgba(129, 140, 248, 0.15);
    --color-sidebar-accent-foreground: #f1f5f9;
    --color-sidebar-border: rgba(148, 163, 184, 0.1);
    --color-sidebar-ring: #818cf8;
    --color-chart-1: #818cf8; /* Indigo */
    --color-chart-2: #22d3ee; /* Cyan */
    --color-chart-3: #34d399; /* Emerald */
    --color-chart-4: #fbbf24; /* Amber */
    --color-chart-5: #f472b6; /* Pink */
    --radius-sm: 0.75rem;
    --radius-md: 1rem;
    --radius-lg: 1.25rem;
    --radius-xl: 1.5rem;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

/* ============================================
   GLASSMORPHISM UI - FUTURISTIC DESIGN SYSTEM
   ============================================ */

/* ====== GRADIENT MESH BACKGROUNDS ====== */

/* Light theme - soft pastel gradient mesh */
.apple-light {
  background:
    radial-gradient(ellipse at 0% 0%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 100% 0%, rgba(236, 72, 153, 0.12) 0%, transparent 50%),
    radial-gradient(ellipse at 100% 100%, rgba(6, 182, 212, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 0% 100%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
    linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%);
  background-attachment: fixed;
  min-height: 100vh;
}

/* Dark theme - deep space gradient with subtle aurora */
.apple-dark {
  background:
    radial-gradient(ellipse at 20% 20%, rgba(99, 102, 241, 0.2) 0%, transparent 40%),
    radial-gradient(ellipse at 80% 20%, rgba(139, 92, 246, 0.15) 0%, transparent 40%),
    radial-gradient(ellipse at 80% 80%, rgba(6, 182, 212, 0.12) 0%, transparent 40%),
    radial-gradient(ellipse at 20% 80%, rgba(236, 72, 153, 0.1) 0%, transparent 40%),
    linear-gradient(180deg, #0f0f1a 0%, #0a0a12 50%, #050508 100%);
  background-attachment: fixed;
  min-height: 100vh;
}

/* ====== GLOBAL TRANSITIONS ====== */
.apple-light,
.apple-dark {
  scroll-behavior: smooth;

  & * {
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  & button,
  & a,
  & input,
  & select,
  & textarea,
  & [role="button"],
  & .bg-card,
  & .border {
    transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/* ====== FROSTED GLASS CARDS ====== */

/* Light theme cards */
.apple-light {
  & .bg-card,
  & .rounded-lg.border.bg-card {
    background: rgba(255, 255, 255, 0.65) !important;
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.5) !important;
    box-shadow:
      0 8px 32px rgba(99, 102, 241, 0.08),
      0 4px 16px rgba(0, 0, 0, 0.04),
      inset 0 1px 0 rgba(255, 255, 255, 0.8);
  }

  & .bg-card:hover {
    background: rgba(255, 255, 255, 0.75) !important;
    box-shadow:
      0 12px 40px rgba(99, 102, 241, 0.12),
      0 8px 24px rgba(0, 0, 0, 0.06),
      inset 0 1px 0 rgba(255, 255, 255, 0.9);
    transform: translateY(-2px);
  }
}

/* Dark theme cards */
.apple-dark {
  & .bg-card,
  & .rounded-lg.border.bg-card {
    background: rgba(30, 32, 48, 0.5) !important;
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(148, 163, 184, 0.12) !important;
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.3),
      0 4px 16px rgba(99, 102, 241, 0.05),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }

  & .bg-card:hover {
    background: rgba(40, 42, 60, 0.6) !important;
    border-color: rgba(129, 140, 248, 0.2) !important;
    box-shadow:
      0 16px 48px rgba(0, 0, 0, 0.4),
      0 8px 24px rgba(129, 140, 248, 0.08),
      inset 0 1px 0 rgba(255, 255, 255, 0.08);
    transform: translateY(-2px);
  }
}

/* ====== SIDEBAR GLASS EFFECT ====== */

.apple-light {
  & [data-sidebar],
  & .bg-sidebar-background,
  & aside {
    background: rgba(255, 255, 255, 0.7) !important;
    backdrop-filter: blur(24px) saturate(180%);
    -webkit-backdrop-filter: blur(24px) saturate(180%);
    border-right: 1px solid rgba(255, 255, 255, 0.5) !important;
  }
}

.apple-dark {
  & [data-sidebar],
  & .bg-sidebar-background,
  & aside {
    background: rgba(15, 15, 25, 0.75) !important;
    backdrop-filter: blur(24px) saturate(180%);
    -webkit-backdrop-filter: blur(24px) saturate(180%);
    border-right: 1px solid rgba(148, 163, 184, 0.08) !important;
  }
}

/* ====== ANIMATED BACKGROUND — GLASS OVERRIDE ====== */
/* When the dashboard gradient background is active, make sidebar and
   header more translucent so the mesh shows through. Must come AFTER
   the Apple theme rules to override their !important backgrounds. */

aside[data-animated-bg] {
  background: color-mix(in srgb, var(--color-sidebar-background) 35%, transparent) !important;
  backdrop-filter: blur(20px) saturate(150%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(150%) !important;
  border-right: none !important;
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.08) !important;
}

header[data-animated-bg] {
  background: color-mix(in srgb, var(--color-background) 35%, transparent) !important;
  backdrop-filter: blur(20px) saturate(150%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(150%) !important;
}

/* ====== GLASS BUTTONS ====== */

.apple-light {
  & button:not(aside button),
  & [role="button"]:not(aside [role="button"]) {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  & .bg-primary {
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
    box-shadow:
      0 4px 16px rgba(99, 102, 241, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  & .bg-primary:hover {
    box-shadow:
      0 8px 24px rgba(99, 102, 241, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
    transform: translateY(-1px);
  }

  & button:not(.bg-primary):not(.bg-destructive):hover,
  & [role="button"]:not(.bg-primary):not(.bg-destructive):hover {
    background: rgba(99, 102, 241, 0.1) !important;
    border-color: rgba(99, 102, 241, 0.3) !important;
  }
}

.apple-dark {
  & button:not(aside button),
  & [role="button"]:not(aside [role="button"]) {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  & .bg-primary {
    background: linear-gradient(135deg, #818cf8 0%, #a78bfa 100%) !important;
    box-shadow:
      0 4px 16px rgba(129, 140, 248, 0.25),
      inset 0 1px 0 rgba(255, 255, 255, 0.15);
  }

  & .bg-primary:hover {
    box-shadow:
      0 8px 28px rgba(129, 140, 248, 0.35),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transform: translateY(-1px);
  }

  & button:not(.bg-primary):not(.bg-destructive):hover,
  & [role="button"]:not(.bg-primary):not(.bg-destructive):hover {
    background: rgba(129, 140, 248, 0.15) !important;
    border-color: rgba(129, 140, 248, 0.3) !important;
  }
}

/* ====== GLASS INPUTS ====== */

.apple-light {
  & input,
  & textarea,
  & select {
    background: rgba(255, 255, 255, 0.7) !important;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(148, 163, 184, 0.3) !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.02);
  }

  & input:focus,
  & textarea:focus,
  & select:focus {
    background: rgba(255, 255, 255, 0.9) !important;
    border-color: rgba(99, 102, 241, 0.5) !important;
    box-shadow:
      0 0 0 3px rgba(99, 102, 241, 0.15),
      inset 0 2px 4px rgba(0, 0, 0, 0.02);
  }
}

.apple-dark {
  & input,
  & textarea,
  & select {
    background: rgba(30, 32, 48, 0.6) !important;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(148, 163, 184, 0.15) !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  & input:focus,
  & textarea:focus,
  & select:focus {
    background: rgba(40, 42, 60, 0.8) !important;
    border-color: rgba(129, 140, 248, 0.5) !important;
    box-shadow:
      0 0 0 3px rgba(129, 140, 248, 0.2),
      inset 0 2px 4px rgba(0, 0, 0, 0.1);
  }
}

/* ====== GLASS POPOVERS & DROPDOWNS ====== */

.apple-light {
  & .bg-popover,
  & [data-radix-popper-content-wrapper] > div {
    background: rgba(255, 255, 255, 0.85) !important;
    backdrop-filter: blur(24px) saturate(200%);
    -webkit-backdrop-filter: blur(24px) saturate(200%);
    border: 1px solid rgba(255, 255, 255, 0.6) !important;
    box-shadow:
      0 24px 48px rgba(0, 0, 0, 0.12),
      0 12px 24px rgba(99, 102, 241, 0.08);
  }
}

.apple-dark {
  & .bg-popover,
  & [data-radix-popper-content-wrapper] > div {
    background: rgba(20, 22, 35, 0.85) !important;
    backdrop-filter: blur(24px) saturate(200%);
    -webkit-backdrop-filter: blur(24px) saturate(200%);
    border: 1px solid rgba(148, 163, 184, 0.12) !important;
    box-shadow:
      0 24px 48px rgba(0, 0, 0, 0.5),
      0 12px 24px rgba(129, 140, 248, 0.05);
  }
}

/* ====== TABLES WITH GLASS EFFECT ====== */

.apple-light {
  & table {
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: 1rem;
    overflow: hidden;
  }

  & th {
    background: rgba(99, 102, 241, 0.08);
  }

  & tr:hover td {
    background: rgba(99, 102, 241, 0.05);
  }
}

.apple-dark {
  & table {
    background: rgba(30, 32, 48, 0.4);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: 1rem;
    overflow: hidden;
  }

  & th {
    background: rgba(129, 140, 248, 0.1);
  }

  & tr:hover td {
    background: rgba(129, 140, 248, 0.08);
  }
}

/* ====== BADGES & STATUS INDICATORS ====== */

.apple-light {
  & .rounded-full {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
}

.apple-dark {
  & .rounded-full {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
}

/* ====== FOCUS STATES ====== */

.apple-light {
  & *:focus-visible {
    outline: 2px solid rgba(99, 102, 241, 0.6);
    outline-offset: 2px;
  }
}

.apple-dark {
  & *:focus-visible {
    outline: 2px solid rgba(129, 140, 248, 0.6);
    outline-offset: 2px;
  }
}

/* ====== SELECTION HIGHLIGHT ====== */

.apple-light ::selection {
  background: rgba(99, 102, 241, 0.25);
}

.apple-dark ::selection {
  background: rgba(129, 140, 248, 0.35);
}

/* ====== SCROLLBAR STYLING ====== */

.apple-light {
  &::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  &::-webkit-scrollbar-track {
    background: transparent;
  }
  &::-webkit-scrollbar-thumb {
    background: rgba(99, 102, 241, 0.3);
    border-radius: 4px;
  }
  &::-webkit-scrollbar-thumb:hover {
    background: rgba(99, 102, 241, 0.5);
  }
}

.apple-dark {
  &::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  &::-webkit-scrollbar-track {
    background: transparent;
  }
  &::-webkit-scrollbar-thumb {
    background: rgba(129, 140, 248, 0.3);
    border-radius: 4px;
  }
  &::-webkit-scrollbar-thumb:hover {
    background: rgba(129, 140, 248, 0.5);
  }
}

/* ====== HEADER GLASS EFFECT ====== */

.apple-light {
  & header,
  & nav {
    background: rgba(255, 255, 255, 0.7) !important;
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border-bottom: 1px solid rgba(255, 255, 255, 0.5) !important;
  }
}

.apple-dark {
  & header,
  & nav {
    background: rgba(15, 15, 25, 0.75) !important;
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border-bottom: 1px solid rgba(148, 163, 184, 0.1) !important;
  }
}

/* ====== ANIMATED GLOW ON INTERACTIVE ELEMENTS ====== */

.apple-light .bg-primary,
.apple-dark .bg-primary {
  position: relative;
  overflow: hidden;
}

.apple-light .bg-primary::before,
.apple-dark .bg-primary::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
  transition: left 0.5s ease;
}

.apple-light .bg-primary:hover::before,
.apple-dark .bg-primary:hover::before {
  left: 100%;
}

/* ====== SHIMMER LOADING ANIMATION ====== */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

/* ====== STATUS PULSE ANIMATION ====== */
@keyframes status-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.status-pulse {
  animation: status-pulse 2s ease-in-out infinite;
}


/* ============================================
   CINEMATIC LOGIN EXPERIENCE
   ============================================ */

.login-gradient-mesh {
  position: absolute;
  inset: -30%;
  z-index: 0;
  background:
    conic-gradient(from 90deg at 20% 20%, oklch(70% 0.14 240 / 0.3), transparent 35%),
    conic-gradient(from 210deg at 80% 15%, oklch(72% 0.12 340 / 0.25), transparent 40%),
    conic-gradient(from 330deg at 75% 85%, oklch(78% 0.12 165 / 0.25), transparent 35%),
    radial-gradient(circle at 30% 70%, oklch(60% 0.08 250 / 0.25), transparent 40%),
    radial-gradient(circle at 70% 30%, oklch(82% 0.08 110 / 0.2), transparent 40%);
  filter: blur(56px);
}

.login-gradient-mesh-animate {
  animation: login-mesh-shift 16s linear infinite;
}

.login-card {
  backdrop-filter: blur(18px) saturate(160%);
  -webkit-backdrop-filter: blur(18px) saturate(160%);
  border-color: color-mix(in oklab, var(--color-border) 70%, transparent);
}

.login-stage-in {
  opacity: 0;
  transform: translateY(10px) scale(0.98);
  filter: blur(6px);
  animation: login-stage-in 520ms cubic-bezier(0.32, 0.72, 0, 1) forwards;
}

.login-logo-shell {
  animation: login-logo-shell-in 380ms cubic-bezier(0.2, 0.75, 0.1, 1) 120ms both;
}

.login-logo {
  overflow: visible;
}

.login-logo-path {
  stroke-dasharray: 140;
  stroke-dashoffset: 140;
  animation: login-logo-draw 520ms ease forwards;
  animation-delay: var(--path-delay, 0ms);
}

.login-logo-shell .login-logo {
  animation: login-logo-pulse 2.8s ease-in-out 720ms infinite;
}

.login-typewriter {
  margin-inline: auto;
  width: 18ch;
  overflow: hidden;
  white-space: nowrap;
  border-right: 2px solid color-mix(in oklab, var(--color-foreground) 60%, transparent);
  animation:
    login-typewriter 1s steps(18, end) 260ms both,
    login-cursor 900ms step-end infinite;
}

.login-particle {
  position: absolute;
  bottom: -1.5rem;
  border-radius: 9999px;
  background: linear-gradient(135deg, oklch(68% 0.16 248 / 0.8), oklch(76% 0.18 165 / 0.8));
  box-shadow: 0 0 12px oklch(72% 0.16 248 / 0.35);
  animation-name: login-float-particle;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
}

.login-input {
  transition:
    border-color 250ms ease,
    box-shadow 250ms ease,
    transform 200ms ease,
    background-color 250ms ease;
}

.login-input:focus-visible {
  border-color: transparent;
  background:
    linear-gradient(var(--color-card), var(--color-card)) padding-box,
    linear-gradient(115deg, oklch(72% 0.16 248), oklch(75% 0.18 165), oklch(76% 0.14 28)) border-box;
  border: 1px solid transparent;
  box-shadow:
    0 0 0 3px oklch(72% 0.13 248 / 0.2),
    0 8px 16px oklch(18% 0.03 265 / 0.18);
  transform: scale(1.01);
}

.login-submit {
  overflow: hidden;
  transition: transform 180ms ease, box-shadow 180ms ease, filter 180ms ease;
}

.login-submit::before {
  content: '';
  position: absolute;
  inset: 0;
  transform: translateX(-120%);
  background: linear-gradient(
    95deg,
    transparent 0%,
    color-mix(in oklab, #fff 65%, transparent) 45%,
    transparent 100%
  );
  transition: transform 350ms ease;
}

.login-submit:hover::before {
  transform: translateX(120%);
}

.login-submit:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 20px color-mix(in oklab, var(--color-primary) 45%, transparent);
}

.login-spinner {
  width: 14px;
  height: 14px;
  border-radius: 9999px;
  border: 2px solid color-mix(in oklab, var(--color-primary-foreground) 35%, transparent);
  border-top-color: var(--color-primary-foreground);
  animation: login-spin 600ms linear infinite;
}

.login-burst {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 9999px;
  background: color-mix(in oklab, var(--color-primary-foreground) 80%, white);
  opacity: 0;
  animation: login-burst 420ms ease-out forwards;
}

.login-burst-1 {
  left: 30%;
  top: 50%;
  animation-delay: 10ms;
}

.login-burst-2 {
  left: 45%;
  top: 25%;
  animation-delay: 30ms;
}

.login-burst-3 {
  left: 60%;
  top: 60%;
  animation-delay: 50ms;
}

.login-burst-4 {
  left: 72%;
  top: 35%;
  animation-delay: 70ms;
}

.login-error-shake {
  animation: login-error-shake 260ms ease;
}

@keyframes login-stage-in {
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}

@keyframes login-logo-shell-in {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(6px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

@keyframes login-logo-draw {
  to {
    stroke-dashoffset: 0;
  }
}

@keyframes login-logo-pulse {
  0%,
  100% {
    transform: scale(1);
    filter: drop-shadow(0 0 0 transparent);
  }
  50% {
    transform: scale(1.04);
    filter: drop-shadow(0 0 10px oklch(72% 0.14 248 / 0.35));
  }
}

@keyframes login-typewriter {
  from {
    width: 0;
  }
  to {
    width: 18ch;
  }
}

@keyframes login-cursor {
  50% {
    border-right-color: transparent;
  }
}

@keyframes login-float-particle {
  from {
    transform: translateY(0) scale(0.9);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  to {
    transform: translateY(-110vh) scale(1.15);
    opacity: 0;
  }
}

@keyframes login-spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes login-burst {
  0% {
    transform: translate(0, 0) scale(0.7);
    opacity: 0;
  }
  40% {
    opacity: 1;
  }
  100% {
    transform: translate(18px, -12px) scale(1.1);
    opacity: 0;
  }
}

@keyframes login-error-shake {
  0%,
  100% {
    transform: translateX(0);
  }
  20% {
    transform: translateX(-4px);
  }
  40% {
    transform: translateX(4px);
  }
  60% {
    transform: translateX(-3px);
  }
  80% {
    transform: translateX(3px);
  }
}

@keyframes login-mesh-shift {
  0% {
    transform: translate3d(0, 0, 0) scale(1);
    filter: blur(56px) hue-rotate(0deg);
  }
  50% {
    transform: translate3d(-2%, 2%, 0) scale(1.04);
    filter: blur(62px) hue-rotate(20deg);
  }
  100% {
    transform: translate3d(0, 0, 0) scale(1);
    filter: blur(56px) hue-rotate(0deg);
  }
}

@media (max-width: 640px) {
  .login-card {
    padding: 1.5rem;
  }

  .login-gradient-mesh {
    inset: -45%;
  }
}

@media (prefers-reduced-motion: reduce) {
  .login-gradient-mesh-animate,
  .login-stage-in,
  .login-logo-shell,
  .login-logo-path,
  .login-typewriter,
  .login-particle,
  .login-submit::before,
  .login-spinner,
  .login-burst,
  .login-error-shake {
    animation: none !important;
    transition: none !important;
  }

  .login-typewriter {
    border-right: 0;
    width: auto;
  }
}

@media (prefers-reduced-transparency: reduce) {
  .login-card {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}

/* Mobile safe area insets for bottom nav */
.pb-safe {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

/* Mobile responsive table scrolling */
@media (max-width: 767px) {
  .mobile-scroll-table {
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
  }

  .mobile-scroll-table table {
    min-width: 600px;
  }

  /* Larger touch targets */
  .mobile-touch-target {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Keyboard-first focus ring — gradient border replaces browser default */
*:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px var(--color-background), 0 0 0 4px var(--color-ring);
  border-radius: inherit;
}

/* Table row keyboard selection highlight */
tr.keyboard-selected {
  background-color: var(--color-accent) !important;
  outline: 2px solid var(--color-ring);
  outline-offset: -2px;
}
